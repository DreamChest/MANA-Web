!!!
%html
  %head
    %meta{:content => "text/html; charset=UTF-8", "http-equiv" => "Content-Type"}/
    %title MANAWeb
    = stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true
    = javascript_include_tag 'application', 'data-turbolinks-track' => true
    = csrf_meta_tags
    %meta{:content => "width=device-width, initial-scale=1", :name => "viewport"}
  %body
    = render "navbar"
    #wrapper
      #sidebar-wrapper
        = render "sidebar"
      #sidebar-wrapper-right
        = render "sidebarright"
      #page-content-wrapper
        .container-fluid
          #page-content
            = render "notice"
            = yield
          #page-modal.modal.fade{role: "dialog"}
            .modal-dialog.modal-lg
              .modal-content
                .modal-header
                  %a.close{data: { dismiss: "modal"}} &times
                  %h4.modal-title#page-modal-title
                .modal-body#page-modal-content

:javascript
  $(document).ready(function() {
    function dynamic_load(result) {
      var result = $(result);

      $("#page-content").html(result.find("#page-content"));
      result.find("script").appendTo("body");
      $("#page-modal").modal("hide");
    }

    $(document).on("click", ".dyn", function() {
      $.get($(this).attr("href"), dynamic_load);
      return false;
    });

    $(document).on("click", ".dyn-modal", function() {
      $.get($(this).attr("href"), function(result) {
        var result = $(result);

        $("#page-modal-title").text(result.find("#page-title").text());
        result.find("#page-title").remove();
        $("#page-modal-content").html(result.find("#page-content"));
        result.find("script").appendTo("body");
      });

      $("#page-modal").modal("show");

      return false;
    });

    $(document).on("click", ".dyn-delete", function() {
      $.ajax({
        url: $(this).attr("href"),
        type: "DELETE",
        success: function(result) {
          dynamic_load(result);
          var result = $(result)
          $("#sidebar-wrapper").html(result.find("#sidebar-wrapper"));
          $("#sidebar-wrapper-right").html(result.find("#sidebar-wrapper-right"));
        }
      });
      return false;
    });
  });
